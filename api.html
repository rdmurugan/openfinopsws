<!DOCTYPE html>
<!--
Copyright (c) 2025 Infinidatum
Author: Duraimurugan Rajamanickam

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - OpenFinOps</title>
    <link rel="icon" type="image/png" href="images/finops-logo.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Fira+Code&display=swap" rel="stylesheet">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GCTB1YQQEM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GCTB1YQQEM');
    </script>
    <style>
        .api-page {
            padding: 120px 0 80px;
        }

        .api-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 3rem;
        }

        .api-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
        }

        .api-menu {
            list-style: none;
        }

        .api-menu li {
            margin-bottom: 0.5rem;
        }

        .api-menu a {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .api-menu a:hover,
        .api-menu a.active {
            background: rgba(0, 212, 170, 0.1);
            color: var(--primary-color);
        }

        .api-content {
            max-width: 900px;
        }

        .api-section {
            margin-bottom: 4rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .api-section h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .api-section h3 {
            font-size: 1.75rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .api-section h4 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--primary-color);
        }

        .method-signature {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 212, 170, 0.3);
            border-left: 4px solid var(--primary-color);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            font-family: 'Fira Code', monospace;
            color: #00d4aa;
        }

        .params-table {
            width: 100%;
            margin: 1.5rem 0;
            border-collapse: collapse;
        }

        .params-table th {
            background: rgba(0, 212, 170, 0.1);
            padding: 0.75rem;
            text-align: left;
            border-bottom: 2px solid var(--primary-color);
        }

        .params-table td {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
        }

        .params-table code {
            background: rgba(0, 0, 0, 0.4);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .code-example {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }

        .code-example code {
            font-family: 'Fira Code', monospace;
            color: #00d4aa;
            font-size: 0.95rem;
            line-height: 1.6;
            display: block;
            white-space: pre-wrap;
        }

        .code-label {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(0, 212, 170, 0.2);
            color: var(--primary-color);
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .return-value {
            background: rgba(0, 168, 255, 0.1);
            border-left: 4px solid var(--secondary-color);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        @media (max-width: 768px) {
            .api-container {
                grid-template-columns: 1fr;
            }

            .api-sidebar {
                position: static;
            }

            .params-table {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <img src="images/finops-logo.png" alt="OpenFinOps Logo">
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="features.html">Features</a></li>
                    <li><a href="intelligent-recommendations.html">AI Recommendations</a></li>
                    <li><a href="get-started.html">Get Started</a></li>
                    <li><a href="documentation.html">Documentation</a></li>
                    <li><a href="community.html">Community</a></li>
                    <li><a href="changelog.html">Changelog</a></li>
                    <li><a href="api.html" class="active">API Reference</a></li>
                    <li><a href="demo.html" class="demo-btn">Live Demo</a></li>
                    <li><a href="https://github.com/rdmurugan/openfinops" target="_blank"><i class="fab fa-github"></i></a></li>
                </ul>
                <div class="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- API Reference Page -->
    <div class="api-page">
        <div class="container">
            <div class="api-container">
                <!-- Sidebar -->
                <aside class="api-sidebar">
                    <ul class="api-menu">
                        <li><a href="#server-setup" class="active">Server Setup</a></li>
                        <li><a href="#observability">ObservabilityHub</a></li>
                        <li><a href="#llm-observability">LLM Observability</a></li>
                        <li><a href="#cost-observatory">Cost Observatory</a></li>
                        <li><a href="#dashboards">Dashboards</a></li>
                        <li><a href="#telemetry">Cloud Telemetry</a></li>
                        <li><a href="#databricks">Databricks Agent</a></li>
                        <li><a href="#snowflake">Snowflake Agent</a></li>
                        <li><a href="#saas-services">SaaS Services</a></li>
                        <li><a href="#webui">Web UI Reference</a></li>
                    </ul>
                </aside>

                <!-- Content -->
                <div class="api-content">
                    <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">API Reference</h1>
                    <p style="font-size: 1.25rem; color: var(--text-secondary); margin-bottom: 3rem;">
                        Complete API documentation for OpenFinOps
                    </p>

                    <!-- ObservabilityHub -->
                    <section id="observability" class="api-section">
                        <h2>ObservabilityHub</h2>
                        <p style="color: var(--text-secondary);">
                            <strong>IMPORTANT:</strong> ObservabilityHub receives data from telemetry agents. You don't manually track costs - agents do this automatically.
                        </p>

                        <h3>Initialization</h3>
                        <div class="method-signature">
                            ObservabilityHub()
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops import ObservabilityHub

# Server-side initialization
hub = ObservabilityHub()</code>
                        </div>

                        <h4>register_cluster()</h4>
                        <div class="method-signature">
                            register_cluster(cluster_id: str, nodes: List[str], region: str = "us-east-1")
                        </div>

                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>cluster_id</code></td>
                                    <td>str</td>
                                    <td>Unique cluster identifier</td>
                                </tr>
                                <tr>
                                    <td><code>nodes</code></td>
                                    <td>List[str]</td>
                                    <td>List of node hostnames or IPs</td>
                                </tr>
                                <tr>
                                    <td><code>region</code></td>
                                    <td>str</td>
                                    <td>Cloud region (default: us-east-1)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>hub.register_cluster(
    cluster_id="gpu-cluster-1",
    nodes=["node-1", "node-2", "node-3"],
    region="us-west-2"
)</code>
                        </div>

                        <h4>get_cluster_health_summary()</h4>
                        <div class="method-signature">
                            get_cluster_health_summary() -> Dict
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># Query health (populated by agents)
health = hub.get_cluster_health_summary()

for cluster_id, metrics in health.items():
    print(f"{cluster_id}: {metrics['health_status']}")
    print(f"  CPU: {metrics['avg_cpu_usage']:.1f}%")
    print(f"  GPU: {metrics['avg_gpu_usage']:.1f}%")</code>
                        </div>

                        <div class="return-value">
                            <strong>Returns:</strong> Dictionary with cluster health metrics populated by telemetry agents
                        </div>
                    </section>

                    <!-- LLM Observability -->
                    <section id="llm-observability" class="api-section">
                        <h2>LLMObservabilityHub</h2>
                        <p style="color: var(--text-secondary);">
                            Specialized monitoring for Large Language Model training and RAG pipelines.
                        </p>

                        <h3>Initialization</h3>
                        <div class="method-signature">
                            LLMObservabilityHub()
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.observability.llm_observability import LLMObservabilityHub

llm_hub = LLMObservabilityHub()</code>
                        </div>

                        <h4>collect_llm_training_metrics()</h4>
                        <div class="method-signature">
                            collect_llm_training_metrics(metrics: LLMTrainingMetrics)
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.observability.llm_observability import LLMTrainingMetrics
import time

metrics = LLMTrainingMetrics(
    run_id="llm-training-001",
    model_name="gpt-custom-7b",
    epoch=5,
    step=1000,
    training_loss=0.245,
    validation_loss=0.289,
    learning_rate=0.0001,
    gpu_memory_mb=42000,
    batch_size=32,
    throughput_samples_per_sec=128.5,
    timestamp=time.time()
)

llm_hub.collect_llm_training_metrics(metrics)</code>
                        </div>

                        <h4>get_training_summary()</h4>
                        <div class="method-signature">
                            get_training_summary(run_id: str) -> Dict
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>summary = llm_hub.get_training_summary("llm-training-001")

print(f"Model: {summary['model_name']}")
print(f"Total Steps: {summary['total_steps']}")
print(f"Best Loss: {summary['best_loss']:.4f}")</code>
                        </div>
                    </section>

                    <!-- Cost Observatory -->
                    <section id="cost-observatory" class="api-section">
                        <h2>CostObservatory</h2>
                        <p style="color: var(--text-secondary);">
                            Centralized cost tracking and budget management. Receives cost data from telemetry agents.
                        </p>

                        <h3>Initialization</h3>
                        <div class="method-signature">
                            CostObservatory(collection_interval: float = 3600)
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.observability.cost_observatory import CostObservatory

cost_obs = CostObservatory()</code>
                        </div>

                        <h4>create_budget()</h4>
                        <div class="method-signature">
                            create_budget(budget: Budget)
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.observability.cost_observatory import Budget
import time

budget = Budget(
    budget_id="monthly-ai-budget",
    name="AI/ML Monthly Budget",
    amount_usd=50000.0,
    period="monthly",
    start_time=time.time(),
    scope={"provider": "aws", "tags": {"team": "ml-research"}},
    alert_threshold=0.8  # Alert at 80%
)

cost_obs.create_budget(budget)</code>
                        </div>

                        <h4>get_cost_summary()</h4>
                        <div class="method-signature">
                            get_cost_summary(time_range_hours: int = 24) -> Dict
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>summary = cost_obs.get_cost_summary(time_range_hours=24)

print(f"Total: ${summary['total_cost']:.2f}")

for provider, cost in summary['by_provider'].items():
    print(f"{provider}: ${cost:.2f}")

for service, cost in summary['by_service'].items():
    print(f"{service}: ${cost:.2f}")</code>
                        </div>

                        <h4>get_budget_status()</h4>
                        <div class="method-signature">
                            get_budget_status() -> Dict
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>status = cost_obs.get_budget_status()

for budget_id, info in status.items():
    print(f"{info['name']}:")
    print(f"  Budget: ${info['amount']:.2f}")
    print(f"  Spent: ${info['spent']:.2f}")
    print(f"  Status: {info['status']}")</code>
                        </div>
                    </section>

                    <!-- Dashboards -->
                    <section id="dashboards" class="api-section">
                        <h2>Dashboards</h2>
                        <p style="color: var(--text-secondary);">
                            Role-based dashboard components for executives and team leads.
                        </p>

                        <h3>CFO Dashboard</h3>
                        <div class="method-signature">
                            CFODashboard(hub: ObservabilityHub)
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.dashboard import CFODashboard

cfo_dash = CFODashboard(hub)

# Generate financial report
report = cfo_dash.generate_financial_report()
print(f"Total Spend: ${report.total_spend}")
print(f"AI/ML ROI: {report.ai_ml_roi}%")
print(f"Budget Status: {report.budget_utilization}%")</code>
                        </div>

                        <h3>COO Dashboard</h3>
                        <div class="method-signature">
                            COODashboard(hub: ObservabilityHub)
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.dashboard import COODashboard

coo_dash = COODashboard(hub)

# Get operational metrics
metrics = coo_dash.get_operational_metrics()
print(f"SLA Compliance: {metrics.sla_compliance}%")
print(f"Efficiency Score: {metrics.operational_efficiency}%")</code>
                        </div>

                        <h3>Infrastructure Leader Dashboard</h3>
                        <div class="method-signature">
                            InfrastructureLeaderDashboard(hub: ObservabilityHub)
                        </div>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.dashboard import InfrastructureLeaderDashboard

infra_dash = InfrastructureLeaderDashboard(hub)

# Get resource utilization
util = infra_dash.get_resource_utilization()
print(f"CPU: {util.cpu_percent}%")
print(f"Memory: {util.memory_percent}%")
print(f"Storage: {util.storage_percent}%")</code>
                        </div>
                    </section>

                    <!-- Telemetry Agents -->
                    <section id="telemetry" class="api-section">
                        <h2>Telemetry Agents</h2>
                        <p style="color: var(--text-secondary);">
                            <strong>Deploy agents as separate processes</strong> to automatically discover resources, collect metrics, and calculate costs.
                        </p>

                        <h3>AWSTelemetryAgent</h3>
                        <div class="method-signature">
                            AWSTelemetryAgent(openfinops_endpoint: str, aws_region: str)
                        </div>

                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>openfinops_endpoint</code></td>
                                    <td>str</td>
                                    <td>OpenFinOps server URL</td>
                                </tr>
                                <tr>
                                    <td><code>aws_region</code></td>
                                    <td>str</td>
                                    <td>AWS region (e.g., 'us-west-2')</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.aws_telemetry_agent import AWSTelemetryAgent

# Initialize agent (uses boto3 credential chain)
agent = AWSTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    aws_region="us-west-2"
)

# Register with server
if agent.register_agent():
    print("✓ Agent registered")

    # Run continuous collection
    # Automatically discovers & calculates costs for:
    # - EC2 instances, EKS clusters, Lambda functions
    # - RDS databases, S3 buckets
    agent.run_continuous(interval_seconds=300)</code>
                        </div>

                        <h3>AzureTelemetryAgent</h3>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.azure_telemetry_agent import AzureTelemetryAgent

agent = AzureTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    subscription_id="your-subscription-id"
)
agent.register_agent()
agent.run_continuous(interval_seconds=300)</code>
                        </div>

                        <h3>GCPTelemetryAgent</h3>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.gcp_telemetry_agent import GCPTelemetryAgent

agent = GCPTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    project_id="your-project-id"
)
agent.register_agent()
agent.run_continuous(interval_seconds=300)</code>
                        </div>
                    </section>

                    <!-- Databricks Telemetry Agent -->
                    <section id="databricks" class="api-section">
                        <h2>Databricks Telemetry Agent</h2>
                        <p style="color: var(--text-secondary);">
                            Collect Databricks DBU consumption, cluster costs, job execution metrics, and SQL warehouse usage.
                        </p>

                        <h3>DatabricksTelemetryAgent</h3>
                        <div class="method-signature">
                            DatabricksTelemetryAgent(openfinops_endpoint: str, databricks_host: str, databricks_token: str, workspace_name: str = None)
                        </div>

                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>openfinops_endpoint</code></td>
                                    <td>str</td>
                                    <td>OpenFinOps server URL (e.g., http://localhost:8080)</td>
                                </tr>
                                <tr>
                                    <td><code>databricks_host</code></td>
                                    <td>str</td>
                                    <td>Databricks workspace URL (e.g., https://your-workspace.cloud.databricks.com)</td>
                                </tr>
                                <tr>
                                    <td><code>databricks_token</code></td>
                                    <td>str</td>
                                    <td>Databricks personal access token</td>
                                </tr>
                                <tr>
                                    <td><code>workspace_name</code></td>
                                    <td>str (optional)</td>
                                    <td>Workspace identifier (default: derived from host)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.databricks_telemetry_agent import DatabricksTelemetryAgent

# Initialize agent
agent = DatabricksTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    databricks_host="https://your-workspace.cloud.databricks.com",
    databricks_token="dapi***",
    workspace_name="production"
)

# Register and run
if agent.register_agent():
    print("✓ Databricks agent registered")
    # Collect every 5 minutes
    agent.run_continuous(interval_seconds=300)</code>
                        </div>

                        <h3>Metrics Collected</h3>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>cluster_metrics</code></td>
                                    <td>Cluster uptime, instance types, worker count, DBU consumption</td>
                                </tr>
                                <tr>
                                    <td><code>job_metrics</code></td>
                                    <td>Job runtime, success/failure, execution costs</td>
                                </tr>
                                <tr>
                                    <td><code>sql_warehouse_metrics</code></td>
                                    <td>Warehouse size, state, estimated costs</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>DBU Pricing</h3>
                        <div class="info-box">
                            <p><strong>Cost Calculation:</strong> The agent automatically calculates costs based on DBU pricing:</p>
                            <ul>
                                <li><strong>All-Purpose Compute:</strong> $0.40/DBU</li>
                                <li><strong>Jobs Compute:</strong> $0.15/DBU</li>
                                <li><strong>SQL Pro:</strong> $0.55/DBU</li>
                                <li><strong>Serverless SQL:</strong> $0.70/DBU</li>
                                <li><strong>Delta Live Tables:</strong> $0.20-$0.30/DBU</li>
                            </ul>
                        </div>

                        <h3>collect_cluster_metrics()</h3>
                        <p>Collect metrics from all clusters in the workspace.</p>
                        <div class="method-signature">
                            collect_cluster_metrics() → Dict[str, Any]
                        </div>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># Returns cluster metrics
{
    "total_clusters": 5,
    "running_clusters": 3,
    "total_estimated_cost_usd": 145.67,
    "clusters": [
        {
            "cluster_name": "prod-cluster",
            "state": "RUNNING",
            "instance_type": "m5.xlarge",
            "num_workers": 4,
            "uptime_hours": 8.5,
            "estimated_cost_usd": 32.45
        }
    ]
}</code>
                        </div>

                        <h3>collect_job_metrics()</h3>
                        <p>Collect job execution metrics and costs.</p>
                        <div class="method-signature">
                            collect_job_metrics(hours_lookback: int = 24) → Dict[str, Any]
                        </div>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># Returns job metrics for last 24 hours
{
    "total_runs": 42,
    "successful_runs": 38,
    "failed_runs": 4,
    "total_estimated_cost_usd": 89.23,
    "jobs": [
        {
            "job_id": 123,
            "run_name": "ETL Pipeline",
            "state": "SUCCESS",
            "runtime_seconds": 1845,
            "estimated_cost_usd": 12.34
        }
    ]
}</code>
                        </div>

                        <h3>CLI Usage</h3>
                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Install dependencies
pip install databricks-sdk requests

# Set credentials
export DATABRICKS_HOST=https://your-workspace.cloud.databricks.com
export DATABRICKS_TOKEN=dapi***

# Run agent
python agents/databricks_telemetry_agent.py \
  --openfinops-endpoint http://localhost:8080 \
  --databricks-host $DATABRICKS_HOST \
  --databricks-token $DATABRICKS_TOKEN \
  --interval 300</code>
                        </div>
                    </section>

                    <!-- Snowflake Telemetry Agent -->
                    <section id="snowflake" class="api-section">
                        <h2>Snowflake Telemetry Agent</h2>
                        <p style="color: var(--text-secondary);">
                            Monitor Snowflake credit consumption, warehouse usage, storage costs, and query patterns.
                        </p>

                        <h3>SnowflakeTelemetryAgent</h3>
                        <div class="method-signature">
                            SnowflakeTelemetryAgent(openfinops_endpoint: str, snowflake_account: str, snowflake_user: str, snowflake_password: str, snowflake_warehouse: str, edition: str = 'enterprise')
                        </div>

                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>openfinops_endpoint</code></td>
                                    <td>str</td>
                                    <td>OpenFinOps server URL</td>
                                </tr>
                                <tr>
                                    <td><code>snowflake_account</code></td>
                                    <td>str</td>
                                    <td>Snowflake account identifier (e.g., xy12345.us-east-1)</td>
                                </tr>
                                <tr>
                                    <td><code>snowflake_user</code></td>
                                    <td>str</td>
                                    <td>Snowflake username</td>
                                </tr>
                                <tr>
                                    <td><code>snowflake_password</code></td>
                                    <td>str</td>
                                    <td>Snowflake password</td>
                                </tr>
                                <tr>
                                    <td><code>snowflake_warehouse</code></td>
                                    <td>str</td>
                                    <td>Warehouse name (default: COMPUTE_WH)</td>
                                </tr>
                                <tr>
                                    <td><code>edition</code></td>
                                    <td>str</td>
                                    <td>Edition for pricing: 'standard', 'enterprise', 'business_critical'</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.snowflake_telemetry_agent import SnowflakeTelemetryAgent

# Initialize agent
agent = SnowflakeTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    snowflake_account="xy12345.us-east-1",
    snowflake_user="admin_user",
    snowflake_password="***",
    snowflake_warehouse="COMPUTE_WH",
    edition="enterprise"
)

# Register and run
if agent.register_agent():
    print("✓ Snowflake agent registered")
    agent.run_continuous(interval_seconds=300)</code>
                        </div>

                        <h3>Metrics Collected</h3>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>warehouse_metrics</code></td>
                                    <td>Credit consumption (compute + cloud services), active hours</td>
                                </tr>
                                <tr>
                                    <td><code>storage_metrics</code></td>
                                    <td>Database storage, failsafe storage, total TB</td>
                                </tr>
                                <tr>
                                    <td><code>query_metrics</code></td>
                                    <td>Query count, execution time, data scanned</td>
                                </tr>
                                <tr>
                                    <td><code>user_attribution</code></td>
                                    <td>Cost breakdown by user and warehouse</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>Credit Pricing</h3>
                        <div class="info-box">
                            <p><strong>Cost Calculation:</strong> Automatic cost calculation based on Snowflake edition:</p>
                            <ul>
                                <li><strong>Standard Edition:</strong> $2.00/credit</li>
                                <li><strong>Enterprise Edition:</strong> $3.00/credit</li>
                                <li><strong>Business Critical:</strong> $4.00/credit</li>
                                <li><strong>Storage:</strong> $40/TB/month (on-demand)</li>
                            </ul>
                        </div>

                        <h3>collect_warehouse_metrics()</h3>
                        <p>Collect warehouse credit consumption for past 24 hours.</p>
                        <div class="method-signature">
                            collect_warehouse_metrics(hours_lookback: int = 24) → Dict[str, Any]
                        </div>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># Returns warehouse metrics
{
    "total_warehouses": 3,
    "total_credits_used": 145.67,
    "total_estimated_cost_usd": 437.01,
    "warehouses": [
        {
            "warehouse_name": "COMPUTE_WH",
            "total_credits_used": 89.45,
            "compute_credits": 78.23,
            "cloud_service_credits": 11.22,
            "active_hours": 18,
            "estimated_cost_usd": 268.35
        }
    ]
}</code>
                        </div>

                        <h3>collect_storage_metrics()</h3>
                        <p>Collect storage usage across all databases.</p>
                        <div class="method-signature">
                            collect_storage_metrics() → Dict[str, Any]
                        </div>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># Returns storage metrics
{
    "total_storage_tb": 12.456,
    "estimated_monthly_cost_usd": 498.24,
    "databases": [
        {
            "database_name": "PROD_DB",
            "current_storage_tb": 8.234,
            "database_tb": 7.123,
            "failsafe_tb": 1.111,
            "estimated_monthly_cost_usd": 329.36
        }
    ]
}</code>
                        </div>

                        <h3>CLI Usage</h3>
                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Install dependencies
pip install snowflake-connector-python requests

# Set credentials
export SNOWFLAKE_USER=admin_user
export SNOWFLAKE_PASSWORD=***

# Run agent
python agents/snowflake_telemetry_agent.py \
  --openfinops-endpoint http://localhost:8080 \
  --snowflake-account xy12345.us-east-1 \
  --snowflake-warehouse COMPUTE_WH \
  --edition enterprise \
  --interval 300</code>
                        </div>
                    </section>

                    <!-- SaaS Services Telemetry Agent -->
                    <section id="saas-services" class="api-section">
                        <h2>SaaS Services Telemetry Agent</h2>
                        <p style="color: var(--text-secondary);">
                            Multi-service agent for monitoring MongoDB Atlas, Redis Cloud, GitHub Actions, DataDog, and more.
                        </p>

                        <h3>SaaSServicesTelemetryAgent</h3>
                        <div class="method-signature">
                            SaaSServicesTelemetryAgent(openfinops_endpoint: str, config_file: str)
                        </div>

                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>openfinops_endpoint</code></td>
                                    <td>str</td>
                                    <td>OpenFinOps server URL</td>
                                </tr>
                                <tr>
                                    <td><code>config_file</code></td>
                                    <td>str</td>
                                    <td>Path to JSON configuration file</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>Configuration File</h3>
                        <p>Create a JSON configuration file to enable specific services:</p>
                        <div class="code-example">
                            <span class="code-label">JSON</span>
                            <code>{
  "mongodb_atlas": {
    "enabled": true,
    "public_key": "your_public_key",
    "private_key": "your_private_key",
    "project_id": "your_project_id"
  },
  "redis_cloud": {
    "enabled": true,
    "api_key": "your_api_key",
    "secret_key": "your_secret_key",
    "account_id": "your_account_id"
  },
  "github_actions": {
    "enabled": true,
    "token": "ghp_your_token",
    "org_name": "your_organization"
  },
  "datadog": {
    "enabled": true,
    "api_key": "your_api_key",
    "app_key": "your_app_key"
  }
}</code>
                        </div>

                        <h3>Python Usage</h3>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.saas_services_telemetry_agent import SaaSServicesTelemetryAgent

# Initialize agent with config
agent = SaaSServicesTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    config_file="saas_config.json"
)

# Register and run (collect hourly)
if agent.register_agent():
    print("✓ SaaS services agent registered")
    agent.run_continuous(interval_seconds=3600)</code>
                        </div>

                        <h3>Supported Services</h3>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Service</th>
                                    <th>Metrics Collected</th>
                                    <th>Cost Estimation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>mongodb_atlas</code></td>
                                    <td>Cluster size, replication, sharding, storage</td>
                                    <td>M10: $0.08/hr, M30: $0.54/hr</td>
                                </tr>
                                <tr>
                                    <td><code>redis_cloud</code></td>
                                    <td>Subscriptions, databases, throughput</td>
                                    <td>Based on subscription pricing</td>
                                </tr>
                                <tr>
                                    <td><code>github_actions</code></td>
                                    <td>Workflow minutes, billable time</td>
                                    <td>Linux: $0.008/min, macOS: $0.08/min</td>
                                </tr>
                                <tr>
                                    <td><code>datadog</code></td>
                                    <td>Host count, usage metrics</td>
                                    <td>~$15/host/month</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>MongoDB Atlas Metrics</h3>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># MongoDB Atlas metrics structure
{
    "service": "mongodb_atlas",
    "total_clusters": 3,
    "total_daily_cost_usd": 47.52,
    "clusters": [
        {
            "cluster_name": "prod-cluster",
            "instance_size": "M30",
            "num_shards": 1,
            "replication_factor": 3,
            "provider": "AWS",
            "region": "us-east-1",
            "hourly_cost_usd": 1.62,
            "daily_cost_usd": 38.88
        }
    ]
}</code>
                        </div>

                        <h3>GitHub Actions Metrics</h3>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># GitHub Actions metrics structure
{
    "service": "github_actions",
    "total_minutes_used": 12450,
    "included_minutes": 3000,
    "billable_minutes": 9450,
    "estimated_monthly_cost_usd": 75.60,
    "minutes_used_breakdown": {
        "UBUNTU": 8000,
        "MACOS": 1450
    }
}</code>
                        </div>

                        <h3>CLI Usage</h3>
                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Create sample configuration
python agents/saas_services_telemetry_agent.py \
  --create-config saas_config.json

# Edit the configuration file with your credentials
# Then run the agent
python agents/saas_services_telemetry_agent.py \
  --openfinops-endpoint http://localhost:8080 \
  --config saas_config.json \
  --interval 3600</code>
                        </div>

                        <h3>Adding Custom Services</h3>
                        <p>Extend the agent by creating custom collectors:</p>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from agents.saas_services_telemetry_agent import SaaSServicesTelemetryAgent

class CustomServiceCollector:
    def __init__(self, api_key: str):
        self.api_key = api_key

    def collect_metrics(self) -> dict:
        # Your custom collection logic
        return {
            "service": "custom_service",
            "total_cost": 123.45,
            "metrics": {...}
        }

# Add to agent configuration
agent = SaaSServicesTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    config_file="config.json"
)
agent.collectors.append(("custom", CustomServiceCollector("api_key")))
agent.run_continuous(interval_seconds=3600)</code>
                        </div>
                    </section>

                    <!-- Server Setup -->
                    <section id="server-setup" class="api-section">
                        <h2>Server Setup & Configuration</h2>
                        <p style="color: var(--text-secondary);">
                            Set up the OpenFinOps server to receive telemetry from agents and serve dashboards.
                        </p>

                        <h3>Step 1: Start the OpenFinOps Server</h3>
                        <p style="color: var(--text-secondary);">
                            The server provides both web dashboards and API endpoints for telemetry ingestion.
                        </p>

                        <h4>Option A: Using CLI</h4>
                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Start server on default port 8080
openfinops-dashboard

# Start on custom host/port
openfinops-dashboard --host 0.0.0.0 --port 8080

# Alternative command
openfinops-server --host 0.0.0.0 --port 8080</code>
                        </div>

                        <h4>Option B: Using Python</h4>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops.webui import start_server

# Start server
start_server(
    host='0.0.0.0',
    port=8080,
    debug=False
)</code>
                        </div>

                        <h3>Step 2: Verify Server is Running</h3>
                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Check health endpoint
curl http://localhost:8080/api/health

# Expected response: {"status": "healthy"}

# Verify server in logs
# You should see:
# 🚀 Starting OpenFinOps Web UI Server...
#    Host: 0.0.0.0
#    Port: 8080</code>
                        </div>

                        <h3>Step 3: Configure Telemetry Endpoints</h3>
                        <p style="color: var(--text-secondary);">
                            The server automatically exposes telemetry endpoints when started. Agents use these to send data.
                        </p>

                        <h4>Available API Endpoints</h4>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Endpoint</th>
                                    <th>Method</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>/api/v1/agents/register</code></td>
                                    <td>POST</td>
                                    <td>Agent registration endpoint</td>
                                </tr>
                                <tr>
                                    <td><code>/api/v1/telemetry/ingest</code></td>
                                    <td>POST</td>
                                    <td>Telemetry data ingestion</td>
                                </tr>
                                <tr>
                                    <td><code>/api/health</code></td>
                                    <td>GET</td>
                                    <td>Server health check</td>
                                </tr>
                                <tr>
                                    <td><code>/</code></td>
                                    <td>GET</td>
                                    <td>Overview dashboard</td>
                                </tr>
                                <tr>
                                    <td><code>/dashboard/cfo</code></td>
                                    <td>GET</td>
                                    <td>CFO executive dashboard</td>
                                </tr>
                                <tr>
                                    <td><code>/dashboard/coo</code></td>
                                    <td>GET</td>
                                    <td>COO operational dashboard</td>
                                </tr>
                                <tr>
                                    <td><code>/dashboard/infrastructure</code></td>
                                    <td>GET</td>
                                    <td>Infrastructure leader dashboard</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>Step 4: Initialize Observability Components</h3>
                        <p style="color: var(--text-secondary);">
                            The server automatically initializes these components, but you can access them programmatically.
                        </p>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code>from openfinops import ObservabilityHub
from openfinops.observability.cost_observatory import CostObservatory
from openfinops.observability.llm_observability import LLMObservabilityHub

# Initialize components (done automatically by server)
hub = ObservabilityHub()
cost_obs = CostObservatory()
llm_hub = LLMObservabilityHub()

# These will receive data from agents automatically
# No manual configuration needed</code>
                        </div>

                        <h3>Step 5: Deploy Telemetry Agents</h3>
                        <p style="color: var(--text-secondary);">
                            Once the server is running, deploy agents to start collecting data.
                        </p>

                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># deploy_agent.py
from agents.aws_telemetry_agent import AWSTelemetryAgent

# Point agent to your server
agent = AWSTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",  # Your server URL
    aws_region="us-west-2"
)

# Register with server
if agent.register_agent():
    print("✓ Agent registered with server")

    # Start continuous collection
    # Agent will POST to http://localhost:8080/api/v1/telemetry/ingest
    agent.run_continuous(interval_seconds=300)</code>
                        </div>

                        <h3>Complete Setup Example</h3>
                        <div class="code-example">
                            <span class="code-label">PYTHON</span>
                            <code># 1. Start server (in one terminal/process)
# openfinops-dashboard --port 8080

# 2. Deploy agent (in another terminal/process)
from agents.aws_telemetry_agent import AWSTelemetryAgent

agent = AWSTelemetryAgent(
    openfinops_endpoint="http://localhost:8080",
    aws_region="us-west-2"
)

agent.register_agent()
agent.run_continuous(interval_seconds=300)

# 3. Access dashboards in browser
# http://localhost:8080/
# http://localhost:8080/dashboard/cfo
# http://localhost:8080/dashboard/coo</code>
                        </div>

                        <h3>Production Deployment</h3>
                        <p style="color: var(--text-secondary);">
                            For production, run the server with proper configuration.
                        </p>

                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Using systemd service
# /etc/systemd/system/openfinops-server.service
[Unit]
Description=OpenFinOps Server
After=network.target

[Service]
Type=simple
User=openfinops
WorkingDirectory=/opt/openfinops
Environment="HOST=0.0.0.0"
Environment="PORT=8080"
ExecStart=/usr/bin/openfinops-dashboard --host 0.0.0.0 --port 8080
Restart=always

[Install]
WantedBy=multi-user.target

# Enable and start
sudo systemctl enable openfinops-server
sudo systemctl start openfinops-server</code>
                        </div>

                        <div class="code-example">
                            <span class="code-label">DOCKER</span>
                            <code># Using Docker
docker run -d \
  --name openfinops-server \
  -p 8080:8080 \
  -e HOST=0.0.0.0 \
  -e PORT=8080 \
  openfinops/server:latest

# Using Docker Compose
# docker-compose.yml
version: '3.8'
services:
  openfinops-server:
    image: openfinops/server:latest
    ports:
      - "8080:8080"
    environment:
      - HOST=0.0.0.0
      - PORT=8080
    restart: always</code>
                        </div>

                        <h3>Network Configuration</h3>
                        <p style="color: var(--text-secondary);">
                            Ensure agents can reach the server on the configured port.
                        </p>

                        <div class="code-example">
                            <span class="code-label">BASH</span>
                            <code># Open firewall port (if needed)
sudo ufw allow 8080/tcp

# Verify server is listening
netstat -tulpn | grep 8080

# Test from agent machine
curl http://your-server-ip:8080/api/health</code>
                        </div>
                    </section>

                    <!-- Web UI Server -->
                    <section id="webui" class="api-section">
                        <h2>Web UI Reference</h2>
                        <p style="color: var(--text-secondary);">
                            Flask-based web server with real-time WebSocket updates.
                        </p>

                        <h4>start_server()</h4>
                        <div class="method-signature">
                            start_server(host: str = '0.0.0.0', port: int = 8080, debug: bool = False)
                        </div>

                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>host</code></td>
                                    <td>str</td>
                                    <td>Host to bind to (default: '0.0.0.0')</td>
                                </tr>
                                <tr>
                                    <td><code>port</code></td>
                                    <td>int</td>
                                    <td>Port to bind to (default: 8080)</td>
                                </tr>
                                <tr>
                                    <td><code>debug</code></td>
                                    <td>bool</td>
                                    <td>Enable debug mode (default: False)</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4>WebSocket Real-Time Updates</h4>
                        <p style="color: var(--text-secondary);">
                            The server pushes real-time updates to connected clients every 5 seconds.
                        </p>

                        <div class="code-example">
                            <span class="code-label">JAVASCRIPT</span>
                            <code>// Client-side WebSocket connection
const socket = io('http://localhost:8080');

// Listen for cost updates
socket.on('cost_update', (data) => {
    console.log('New cost data:', data);
    updateDashboard(data);
});

// Listen for metric updates
socket.on('metrics_update', (data) => {
    console.log('New metrics:', data);
    updateCharts(data);
});</code>
                        </div>

                        <h4>Dashboard Routes</h4>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Route</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>/</code></td>
                                    <td>Overview dashboard with key metrics</td>
                                </tr>
                                <tr>
                                    <td><code>/dashboard/cfo</code></td>
                                    <td>CFO executive financial dashboard</td>
                                </tr>
                                <tr>
                                    <td><code>/dashboard/coo</code></td>
                                    <td>COO operational efficiency dashboard</td>
                                </tr>
                                <tr>
                                    <td><code>/dashboard/infrastructure</code></td>
                                    <td>Infrastructure leader technical dashboard</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="footer-logo">
                        <img src="images/finops-logo.png" alt="OpenFinOps Logo">
                    </div>
                    <p>Open source FinOps platform for AI/ML cost intelligence</p>
                    <div class="social-links">
                        <a href="https://github.com/rdmurugan/openfinops" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://pypi.org/project/openfinops/" target="_blank">
                            <i class="fab fa-python"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="features.html">Features</a></li>
                        <li><a href="documentation.html">Documentation</a></li>
                        <li><a href="api.html">API Reference</a></li>
                        <li><a href="demo.html">Live Demo</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="https://github.com/rdmurugan/openfinops" target="_blank">GitHub</a></li>
                        <li><a href="https://pypi.org/project/openfinops/" target="_blank">PyPI</a></li>
                        <li><a href="documentation.html#installation">Installation</a></li>
                        <li><a href="documentation.html#quickstart">Quick Start</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="https://github.com/rdmurugan/openfinops/issues" target="_blank">Issues</a></li>
                        <li><a href="https://github.com/rdmurugan/openfinops/discussions" target="_blank">Discussions</a></li>
                        <li><a href="https://github.com/rdmurugan/openfinops/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Infinidatum LLC. OpenFinOps is licensed under Apache-2.0</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Highlight active section in sidebar
        const sections = document.querySelectorAll('.api-section');
        const menuLinks = document.querySelectorAll('.api-menu a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });

            menuLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
